<div class="fixed w-full top-0 z-40">
  <!-- Gradient background with animation -->
  <div
    class="absolute inset-0 bg-gradient-to-r from-gray-900/95 via-gray-800/95 to-gray-900/95 animate-gradient backdrop-blur-lg"
  ></div>
  <div
    class="absolute inset-0 bg-gradient-to-r from-primary-500/30 via-secondary-500/30 to-accent-500/30 animate-gradient-slow opacity-70"
  ></div>

  <div class="relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex justify-between h-20">
      <div class="flex items-center flex-1 min-w-0">
        <a routerLink="/" class="flex items-center group min-w-0">
          <div class="relative flex-shrink-0">
            <div
              class="w-[5.6rem] h-[5.6rem] flex items-center justify-center transform group-hover:scale-110 transition-transform duration-300"
            >
              <img
                src="https://i.ibb.co/jvCJnx86/pawfect-logo-1.png"
                alt="Pawfect Logo"
                class="w-[4.5rem] h-[4.5rem] object-contain animate-float-very-slow"
              />
            </div>
          </div>
          <!-- Brand name with gradient - visible on all screens -->
          <h1 class="ml-3 text-3xl font-bold flex-shrink-0 md:flex-shrink-0 sm:flex-shrink-0">
            <span
              class="bg-gradient-to-r from-primary-400 via-secondary-400 to-accent-400 bg-clip-text text-transparent animate-gradient"
            >
              Pawfect
            </span>
          </h1>
        </a>
      </div>

      <!-- Navigation Links - Desktop -->
      <div class="hidden md:flex items-center space-x-6">
        <!-- Nav Links that should move left when search expands -->
        <div
          class="flex items-center space-x-6 transition-all duration-700 ease-out"
          [class.nav-links-pushed]="showDesktopSearch && isLoggedIn"
        >
          <app-nav-link routerLink="/search">{{
            "APP.COMMONS.SEARCH" | translate
          }}</app-nav-link>
          <app-nav-link routerLink="/about">{{
            "APP.COMMONS.ABOUT_US" | translate
          }}</app-nav-link>
          <app-nav-link routerLink="/contact">{{
            "APP.COMMONS.CONTACT" | translate
          }}</app-nav-link>
        </div>

        <!-- Desktop Search Button - Better positioned -->
        <div
          *ngIf="isLoggedIn"
          class="desktop-search-container relative flex items-center h-full"
        >
          <!-- Search Button (collapsed state) -->
          <button
            *ngIf="!showDesktopSearch"
            type="button"
            (click)="toggleDesktopSearch()"
            class="search-toggle-btn group relative flex items-center justify-center w-10 h-10 bg-white/10 hover:bg-white/20 text-white rounded-lg backdrop-blur-sm border border-white/20 transition-all duration-300 hover:scale-105"
            [attr.aria-label]="'APP.COMMONS.SEARCH_SHELTERS' | translate"
          >
            <!-- Search icon with rotation animation -->
            <ng-icon
              name="lucideSearch"
              class="text-white group-hover:rotate-12 transition-all duration-500 ease-in-out animate-search-float"
              [size]="'20'"
            ></ng-icon>
          </button>

          <!-- Expanded Search Bar -->
          <div
            *ngIf="showDesktopSearch"
            class="absolute right-0 top-5 search-bar-expanded z-50 h-10 flex items-center"
          >
            <div class="relative w-full h-full">
              <button
                type="button"
                (click)="onShelterSearchSubmit()"
                class="absolute inset-y-0 left-0 pl-3 flex items-center text-white/70 hover:text-white transition-colors cursor-pointer"
              >
                <ng-icon name="lucideSearch" [size]="'20'"></ng-icon>
              </button>
              <input
                type="text"
                [formControl]="shelterSearchControl"
                (focus)="onShelterSearchFocus()"
                (keydown.enter)="onShelterSearchSubmit()"
                class="desktop-search-input w-full h-full pl-10 pr-12 bg-white/20 border border-white/30 rounded-lg text-white placeholder-white/70 focus:outline-none focus:ring-2 focus:ring-primary-400 focus:border-transparent backdrop-blur-sm transition-all duration-300"
                [placeholder]="'APP.COMMONS.SEARCH_SHELTERS' | translate"
              />

              <!-- Close button -->
              <button
                type="button"
                (click)="toggleDesktopSearch()"
                class="absolute inset-y-0 right-0 pr-3 flex items-center text-white/60 hover:text-white transition-colors"
              >
                <ng-icon name="lucideX" [size]="'16'"></ng-icon>
              </button>

              <!-- Loading indicator -->
              <div
                *ngIf="isSearching"
                class="absolute inset-y-0 right-10 pr-3 flex items-center"
              >
                <div
                  class="animate-spin rounded-full h-4 w-4 border-2 border-white/30 border-t-white"
                ></div>
              </div>
            </div>

            <!-- Search Results Dropdown -->
            <div
              *ngIf="
                showShelterDropdown ||
                (shelterSearchResults.length === 0 &&
                  !isSearching &&
                  shelterSearchControl.value &&
                  shelterSearchControl.value.trim().length >= 2)
              "
              class="absolute top-full left-0 right-0 mt-2 bg-white rounded-lg shadow-xl border border-gray-200 z-50 max-h-96 overflow-y-auto"
            >
              <!-- Recent Searches -->
              <div
                *ngIf="
                  recentQueries.length > 0 &&
                  (!shelterSearchControl.value ||
                    shelterSearchControl.value.trim().length === 0) &&
                  !isSearching
                "
                class="p-2"
              >
                <div
                  class="px-3 py-2 text-xs font-medium text-gray-500 uppercase tracking-wider border-b border-gray-100 recent-searches-header"
                >
                  {{ "APP.COMMONS.RECENT_SEARCHES" | translate }}
                </div>
                <div
                  *ngFor="let query of recentQueries"
                  (click)="onRecentQuerySelect(query)"
                  class="flex items-center justify-between px-3 py-2 hover:bg-gray-50 cursor-pointer transition-colors duration-200 rounded-md mx-1 my-1 recent-search-item group"
                >
                  <div class="flex items-center flex-1 min-w-0">
                    <ng-icon
                      name="lucideHistory"
                      class="w-4 h-4 text-gray-400 mr-3 flex-shrink-0"
                    ></ng-icon>
                    <span class="text-sm text-gray-700 truncate">{{
                      query
                    }}</span>
                  </div>
                  <button
                    (click)="onDeleteRecentQuery(query, $event)"
                    class="opacity-0 group-hover:opacity-100 ml-2 p-1 hover:bg-red-100 rounded-full transition-all duration-200 flex-shrink-0"
                    title="Delete this search"
                  >
                    <ng-icon
                      name="lucideX"
                      class="w-3 h-3 text-red-500 hover:text-red-700"
                    ></ng-icon>
                  </button>
                </div>
              </div>

              <!-- Nothing Found State -->
              <div
                *ngIf="
                  shelterSearchResults.length === 0 &&
                  !isSearching &&
                  shelterSearchControl.value &&
                  shelterSearchControl.value.trim().length >= 2
                "
                class="px-6 py-10 text-center"
              >
                <div class="flex flex-col items-center justify-center">
                  <ng-icon
                    name="lucideHouse"
                    class="w-16 h-16 text-gray-300 mb-4"
                    [size]="'24'"
                  ></ng-icon>
                  <h3 class="text-base font-semibold text-gray-900 mb-2">
                    {{ "APP.COMMONS.NO_SHELTERS_FOUND" | translate }}
                  </h3>
                  <p class="text-sm text-gray-500 max-w-xs">
                    {{ "APP.COMMONS.SEARCH_DIFFERENT_KEYWORDS" | translate }}
                  </p>
                </div>
              </div>

              <div
                *ngFor="
                  let shelter of shelterSearchResults;
                  trackBy: trackByShelter
                "
                (click)="onShelterSelect(shelter)"
                class="search-result-item flex items-start p-4 hover:bg-gray-50 cursor-pointer transition-colors duration-200 border-b border-gray-100 last:border-b-0"
              >
                <!-- Profile Photo -->
                <div class="flex-shrink-0 mr-3">
                  <div
                    class="w-12 h-12 rounded-full overflow-hidden bg-gray-200 flex items-center justify-center"
                  >
                    <img
                      *ngIf="
                        shelter.user?.profilePhoto?.sourceUrl;
                        else defaultAvatar
                      "
                      [src]="shelter.user?.profilePhoto?.sourceUrl!"
                      [alt]="shelter.shelterName || 'Shelter'"
                      class="w-full h-full object-cover"
                      (error)="onImageError($event)"
                    />
                    <ng-template #defaultAvatar>
                      <img
                        src="assets/placeholder.jpg"
                        [alt]="shelter.shelterName || 'Shelter'"
                        class="w-full h-full object-cover"
                        (error)="onImageError($event)"
                      />
                      <ng-icon
                        name="lucideBuilding2"
                        class="text-gray-400"
                        [size]="'24'"
                        style="display: none"
                      ></ng-icon>
                    </ng-template>
                  </div>
                </div>

                <!-- Shelter Info -->
                <div class="flex-1 min-w-0">
                  <h3 class="text-sm font-semibold text-gray-900 truncate">
                    {{ shelter.shelterName }}
                  </h3>
                  <p
                    *ngIf="shelter.description"
                    class="text-xs text-gray-600 mt-1 line-clamp-1"
                  >
                    {{ shelter.description }}
                  </p>
                  <p
                    *ngIf="
                      shelter.user?.location?.city ||
                      shelter.user?.location?.address
                    "
                    class="text-xs text-gray-500 mt-1 flex items-center"
                  >
                    <ng-icon
                      name="lucideMapPin"
                      class="mr-1"
                      [size]="'12'"
                    ></ng-icon>
                    <span class="truncate">
                      {{ shelter.user?.location?.city
                      }}{{
                        shelter.user?.location?.city &&
                        shelter.user?.location?.address
                          ? ", "
                          : ""
                      }}{{ shelter.user?.location?.address }}
                    </span>
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Notifications Button - Desktop -->
        <div *ngIf="isLoggedIn" class="notifications-container relative z-50">
          <button
            type="button"
            (click)="toggleNotificationsDropdown()"
            class="relative flex items-center justify-center w-10 h-10 bg-white/10 hover:bg-white/20 text-white rounded-lg backdrop-blur-sm border border-white/20 transition-all duration-300 hover:scale-105 group"
            [attr.aria-label]="'APP.COMMONS.NOTIFICATIONS' | translate"
          >
            <ng-icon
              name="lucideBell"
              class="text-white group-hover:rotate-12 transition-all duration-300"
              [size]="'20'"
            ></ng-icon>

            <!-- Notification Count Badge -->
            <span
              *ngIf="notificationCount > 0"
              class="absolute -top-1 -right-1 bg-red-500 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center min-w-[20px] animate-pulse"
            >
              {{ notificationCount > 99 ? "99+" : notificationCount }}
            </span>
          </button>

          <!-- Notifications Dropdown - Desktop -->
          <app-notifications-dropdown
            *ngIf="showNotificationsDropdown"
            class="hidden md:block absolute top-full left-1/2 transform -translate-x-1/2 mt-8 z-50"
            (notificationCountChange)="onNotificationCountChange($event)"
          ></app-notifications-dropdown>
        </div>

        <!-- Language Switcher Dropdown -->
        <div class="relative" role="group" aria-label="Language switcher">
          <button
            (click)="toggleLanguageDropdown()"
            class="flex items-center gap-1 px-3 py-1 rounded-md bg-primary-700 text-white font-medium text-sm hover:bg-primary-800 transition-colors outline-none focus:ring-0"
            aria-haspopup="listbox"
            [attr.aria-expanded]="showLangDropdown"
          >
            <span *ngIf="currentLanguageObj">
              <span
                *ngIf="currentLanguageObj.flag"
                aria-hidden="true"
                class="text-base"
                >{{ currentLanguageObj.flag }}</span
              >
              <span> {{ currentLanguageObj.label }}</span>
            </span>
            <svg
              class="ml-1 w-4 h-4 text-white opacity-80"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              viewBox="0 0 24 24"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <path d="M6 9l6 6 6-6"></path>
            </svg>
          </button>
          <ul
            class="absolute left-1/2 -translate-x-1/2 mt-1 w-36 bg-primary-700 rounded-md z-50 border border-primary-800 py-1 text-white transition-all duration-200 ease-in-out pointer-events-none"
            [class.opacity-100]="showLangDropdown"
            [class.opacity-0]="!showLangDropdown"
            [class.transform]="true"
            [class.scale-100]="showLangDropdown"
            [class.scale-95]="!showLangDropdown"
            [class.pointer-events-auto]="showLangDropdown"
            [class.pointer-events-none]="!showLangDropdown"
            role="listbox"
          >
            <li
              *ngFor="let lang of supportedLanguages"
              (click)="selectLanguageDropdown(lang.code)"
              [class.bg-primary-600]="currentLanguage === lang.code"
              [class.bg-primary-700]="currentLanguage !== lang.code"
              [class.text-white]="currentLanguage === lang.code"
              [class.text-gray-300]="currentLanguage !== lang.code"
              [class.border-l-4]="currentLanguage === lang.code"
              [class.border-primary-400]="currentLanguage === lang.code"
              class="flex items-center gap-2 px-3 py-2 cursor-pointer hover:bg-primary-600 focus:bg-primary-600 transition-all duration-200 text-sm relative"
              [attr.aria-selected]="currentLanguage === lang.code"
              role="option"
            >
              <span *ngIf="lang.flag" aria-hidden="true" class="text-base">{{
                lang.flag
              }}</span>
              <span class="font-medium">{{ lang.label }}</span>
              <ng-icon
                *ngIf="currentLanguage === lang.code"
                name="lucideCheck"
                class="ml-auto text-primary-300"
                [size]="'16'"
              >
              </ng-icon>
            </li>
          </ul>
        </div>

        <!-- Show login button or user menu -->
        <ng-container *ngIf="!isLoggedIn; else userMenu">
          <button
            (click)="navigateToLogin()"
            [disabled]="isLoginRoute()"
            class="flex items-center px-4 py-2 bg-white/10 hover:bg-white/20 text-white rounded-lg backdrop-blur-sm border border-white/20 transition-all duration-300 hover:scale-105 group disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100 disabled:hover:bg-white/10"
          >
            <ng-icon
              name="lucideUser"
              class="mr-2 group-hover:rotate-12 transition-transform duration-300"
              [size]="'20'"
            ></ng-icon>
            {{ "APP.COMMONS.LOGIN" | translate }}
          </button>
        </ng-container>

        <ng-template #userMenu>
          <app-dropdown
            [(isOpen)]="isUserMenuOpen"
            (isOpenChange)="onUserMenuToggle($event)"
          >
            <div trigger class="flex items-center space-x-2 cursor-pointer">
              <app-user-avatar
                [imageUrl]="currentUser?.profilePhoto?.sourceUrl"
                [name]="currentUser?.fullName"
              ></app-user-avatar>
            </div>

            <app-dropdown-item
              routerLink="/profile"
              icon="lucideUser"
              (click)="isUserMenuOpen = false"
              >{{ "APP.COMMONS.PROFILE" | translate }}</app-dropdown-item
            >
            <app-dropdown-item (click)="logout()" icon="lucideLogOut">{{
              "APP.COMMONS.LOGOUT" | translate
            }}</app-dropdown-item>
          </app-dropdown>
        </ng-template>
      </div>

      <!-- Mobile Search and Menu Button -->
      <div class="md:hidden flex items-center space-x-1 flex-shrink-0">
        <!-- Mobile Notifications Button - Only visible when logged in -->
        <div *ngIf="isLoggedIn" class="notifications-container relative z-50">
          <button
            type="button"
            (click)="toggleNotificationsDropdown()"
            class="relative text-white/90 hover:text-white transition-colors p-2 rounded-lg hover:bg-white/10"
            [attr.aria-label]="'APP.COMMONS.NOTIFICATIONS' | translate"
          >
            <ng-icon
              name="lucideBell"
              class="transition-all duration-300"
              [size]="'20'"
            ></ng-icon>

            <!-- Notification Count Badge -->
            <span
              *ngIf="notificationCount > 0"
              class="absolute -top-1 -right-1 bg-red-500 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center min-w-[20px] animate-pulse"
            >
              {{ notificationCount > 99 ? "99+" : notificationCount }}
            </span>
          </button>
        </div>

        <!-- Mobile Search Button - Only visible when logged in -->
        <button
          *ngIf="isLoggedIn"
          type="button"
          class="mobile-search-button text-white/90 hover:text-white transition-colors p-2 rounded-lg hover:bg-white/10"
          (click)="toggleMobileSearch()"
          [attr.aria-label]="'APP.COMMONS.SEARCH_SHELTERS' | translate"
        >
          <ng-icon
            name="lucideSearch"
            class="group-hover:rotate-12 transition-all duration-500 ease-in-out animate-search-float"
            [size]="'20'"
          ></ng-icon>
        </button>

        <!-- Mobile Menu Button -->
        <button
          type="button"
          class="text-white/90 hover:text-white transition-colors p-2 rounded-lg hover:bg-white/10"
          (click)="toggleMobileMenu()"
        >
          <ng-icon
            [name]="isMobileMenuOpen ? 'lucideX' : 'lucideMenu'"
            [size]="'24'"
          ></ng-icon>
        </button>
      </div>
    </div>
  </div>

  <!-- Mobile Search Overlay -->
  <div
    *ngIf="showMobileSearch && isLoggedIn"
    class="mobile-search-overlay md:hidden absolute top-full left-0 right-0 bg-gray-900/95 backdrop-blur-lg border-t border-white/10 z-40"
  >
    <div class="p-4">
      <div class="relative shelter-search-dropdown">
        <div class="relative">
          <div
            class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"
          >
            <ng-icon
              name="lucideSearch"
              class="text-white/60"
              [size]="'20'"
            ></ng-icon>
          </div>
          <input
            type="text"
            [formControl]="shelterSearchControl"
            (focus)="onShelterSearchFocus()"
            (keydown.enter)="onShelterSearchSubmit()"
            class="mobile-search-input w-full pl-10 pr-12 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-primary-400 focus:border-transparent backdrop-blur-sm transition-all duration-300"
            [placeholder]="'APP.COMMONS.SEARCH_SHELTERS' | translate"
          />

          <!-- Close button -->
          <button
            type="button"
            (click)="toggleMobileSearch()"
            class="absolute inset-y-0 right-0 pr-3 flex items-center text-white/60 hover:text-white transition-colors"
          >
            <ng-icon name="lucideX" [size]="'18'"></ng-icon>
          </button>

          <!-- Loading indicator -->
          <div
            *ngIf="isSearching"
            class="absolute inset-y-0 right-10 pr-3 flex items-center"
          >
            <div
              class="animate-spin rounded-full h-4 w-4 border-2 border-white/30 border-t-white"
            ></div>
          </div>
        </div>

        <!-- Mobile Search Results -->
        <div
          *ngIf="
            showShelterDropdown ||
            (shelterSearchResults.length === 0 &&
              !isSearching &&
              shelterSearchControl.value &&
              shelterSearchControl.value.trim().length >= 2)
          "
          class="mt-3 bg-white rounded-lg shadow-xl border border-gray-200 max-h-80 overflow-y-auto"
        >
          <!-- Recent Searches - Mobile -->
          <div
            *ngIf="
              recentQueries.length > 0 &&
              (!shelterSearchControl.value ||
                shelterSearchControl.value.trim().length === 0) &&
              !isSearching
            "
            class="p-2"
          >
            <div
              class="px-3 py-2 text-xs font-medium text-gray-500 uppercase tracking-wider border-b border-gray-100 recent-searches-header"
            >
              {{ "APP.COMMONS.RECENT_SEARCHES" | translate }}
            </div>
            <div
              *ngFor="let query of recentQueries"
              (click)="onRecentQuerySelect(query)"
              class="flex items-center justify-between px-3 py-2 hover:bg-gray-50 cursor-pointer transition-colors duration-200 rounded-md mx-1 my-1 recent-search-item group"
            >
              <div class="flex items-center flex-1 min-w-0">
                <ng-icon
                  name="lucideHistory"
                  class="w-4 h-4 text-gray-400 mr-3 flex-shrink-0"
                ></ng-icon>
                <span class="text-sm text-gray-700 truncate">{{ query }}</span>
              </div>
              <button
                (click)="onDeleteRecentQuery(query, $event)"
                class="opacity-0 group-hover:opacity-100 ml-2 p-1 hover:bg-red-100 rounded-full transition-all duration-200 flex-shrink-0"
                title="Delete this search"
              >
                <ng-icon
                  name="lucideX"
                  class="w-3 h-3 text-red-500 hover:text-red-700"
                ></ng-icon>
              </button>
            </div>
          </div>

          <!-- Nothing Found State - Mobile -->
          <div
            *ngIf="
              shelterSearchResults.length === 0 &&
              !isSearching &&
              shelterSearchControl.value &&
              shelterSearchControl.value.trim().length >= 2
            "
            class="px-6 py-10 text-center"
          >
            <div class="flex flex-col items-center justify-center">
              <ng-icon
                name="lucideHouse"
                class="w-16 h-16 text-gray-300 mb-4"
                [size]="'24'"
              ></ng-icon>
              <h3 class="text-base font-semibold text-gray-900 mb-2">
                {{ "APP.COMMONS.NO_SHELTERS_FOUND" | translate }}
              </h3>
              <p class="text-sm text-gray-500 max-w-xs">
                {{ "APP.COMMONS.SEARCH_DIFFERENT_KEYWORDS" | translate }}
              </p>
            </div>
          </div>

          <div
            *ngFor="
              let shelter of shelterSearchResults;
              trackBy: trackByShelter
            "
            (click)="onShelterSelect(shelter)"
            class="search-result-item flex items-start p-4 hover:bg-gray-50 cursor-pointer transition-colors duration-200 border-b border-gray-100 last:border-b-0"
          >
            <!-- Profile Photo -->
            <div class="flex-shrink-0 mr-3">
              <div
                class="w-12 h-12 rounded-full overflow-hidden bg-gray-200 flex items-center justify-center"
              >
                <img
                  *ngIf="
                    shelter.user?.profilePhoto?.sourceUrl;
                    else defaultMobileAvatar
                  "
                  [src]="shelter.user?.profilePhoto?.sourceUrl!"
                  [alt]="shelter.shelterName || 'Shelter'"
                  class="w-full h-full object-cover"
                  (error)="onImageError($event)"
                />
                <ng-template #defaultMobileAvatar>
                  <img
                    src="assets/placeholder.jpg"
                    [alt]="shelter.shelterName || 'Shelter'"
                    class="w-full h-full object-cover"
                    (error)="onImageError($event)"
                  />
                  <ng-icon
                    name="lucideBuilding2"
                    class="text-gray-400"
                    [size]="'24'"
                    style="display: none"
                  ></ng-icon>
                </ng-template>
              </div>
            </div>

            <!-- Shelter Info -->
            <div class="flex-1 min-w-0">
              <h3 class="text-sm font-semibold text-gray-900 truncate">
                {{ shelter.shelterName }}
              </h3>
              <p
                *ngIf="shelter.description"
                class="text-xs text-gray-600 mt-1 line-clamp-1"
              >
                {{ shelter.description }}
              </p>
              <p
                *ngIf="
                  shelter.user?.location?.city ||
                  shelter.user?.location?.address
                "
                class="text-xs text-gray-500 mt-1 flex items-center"
              >
                <ng-icon
                  name="lucideMapPin"
                  class="mr-1"
                  [size]="'12'"
                ></ng-icon>
                <span class="truncate">
                  {{ shelter.user?.location?.city
                  }}{{
                    shelter.user?.location?.city &&
                    shelter.user?.location?.address
                      ? ", "
                      : ""
                  }}{{ shelter.user?.location?.address }}
                </span>
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Mobile Notifications Dropdown -->
  <div
    *ngIf="showNotificationsDropdown && isLoggedIn"
    class="md:hidden fixed inset-0 bg-black/50 mobile-notifications-overlay"
    (click)="closeNotificationsDropdown()"
  >
    <div
      class="absolute top-20 left-4 right-4 max-h-[calc(100vh-6rem)]"
      (click)="$event.stopPropagation()"
    >
      <app-notifications-dropdown
        (notificationCountChange)="onNotificationCountChange($event)"
      ></app-notifications-dropdown>
    </div>
  </div>

  <!-- Mobile Menu -->
  <app-mobile-menu
    [isOpen]="isMobileMenuOpen"
    [isLoggedIn]="isLoggedIn"
    [currentUser]="currentUser"
    [currentLanguage]="currentLanguage"
    [supportedLanguages]="supportedLanguages"
    (languageChange)="setLanguage($event)"
    (close)="closeMobileMenu()"
    (logout)="logout()"
  >
  </app-mobile-menu>
</div>

<!-- Spacer to prevent content from hiding under fixed header -->
<div class="h-20"></div>
